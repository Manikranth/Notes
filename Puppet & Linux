PUPPET
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

System requrments:
-------------------
Has to have the persistent Hoatname 
 - 2cpu /4 ram  for Master 
No windowes for master 
Puppet need the port 8140 to open  
Need time sync

Puppet in EC2:
--------------
Create Ec2 - ports are open on your new EC2 instance:

443 — HTTPS
8140 — Puppet Enterprise
61613 — the Puppet Enterprise orchestration engine (MCollective)

https://puppet.com/try-puppet/puppet-enterprise/download/

	Master:
	-------

		## hostname maping -----------------
		ifconfig -a
		nano /etc/hosts
		     <ip>    <hostname (puppet.munn.com)> puppet
		hostnamectl set-hostname puppet.munna.com
		systemctl status firewalld

		# installing puppet --------------------
		yum install wget
		wget the package for the master 

		rtpm -qpi <package name>     						## if its .rpm
		tar -xzvf puppet-enterprise-2019.8.1-redhatfips-7-x86_64.tar.gz         ##if tar and unpack the tarball

		systemctl status puppet							## status of the puppet
		systemctl start puppet							## start of the puppet

		sudo /opt/puppetlabs/bin/puppetserver ca list --all
		sudo /opt/puppetlabs/bin/puppetserver ca sign <hostname> / --all

		To automate the process the process we can use the "autosign.conf":
			-- autosign.conf   							## path /ect/puppetlabs/puppet/autosign.conf
				<full hostname>
				<*.company.com>
				after the modifing the autosign.conf do not for get to restart the puppet server - systemctl restart puppet

	Agent:
	-------
		wget the package for the  node
		rtpm -qpi <package name>
		nano /etc/puppetlab/puppet/puppet.conf
		     - copy the master hostname under the 
		       [main]
		       server = ip-172-31-31-80.us-east-2.compute.internal 

		Run pupprt agent -t   				##certificate management 


Puppet commends: 
----------------
sudo puppet cert clean <Host name>   				## [remove the agent cerit in master]
sudo puppet cert list <Host name>     				## [list all the unsigned cerit in master]
			         --all 			        ## [to see signed and unsigned]
sudo puppet cert sign <Host name>     				## [sign the agent cerit in master]

puppet cert generate:

puppet cert sing <hostname> 							## sign the cert from the agent 
To automate the process the process we can use the "autosign.conf":
	-- autosign.conf   							## path /ect/puppetlabs/puppet/autosign.conf
		<full hostname>
		<*.company.com>
		after the modifing the autosign.conf do not for get to restart the puppet server - systemctl restart puppet



Paths:
--------
/var/lib/puppet/ssl/						## All cert related 
/etc/puppetlabs/puppet/ssl/ca/signed				## Signed cert 
/ect/puppetlabs/puppet/puppet.conf				## puppet .conf file

/var/log/ 							## Logs



cat /etc/passwd							## store the used login detailed 
cd var/fedex/cloud/ip/logs/					            [ip logs]
cd /var/fedex/mkacct/includes/                      [To puchtocluster]
cd /var/fedex/cloud/alacarte/data/manifests/               [manifests]
cd /var/fedex/cloud/platform_service/logs              [Platform_logs]
cd /var/fedex/cloud/alacarte/logs/			       [alacart_logs]
cat /var/log/puppet/puppet-agent.log  			         [Agent_logs]
cd /var/fedex/cloud/acct/logs/                              [act_logs]
cd /opt/fedex/cloud/elmo/current/bin/
grep c0011026 /var/fedex/cloud/placement/logs/application*log [to see that SID and PID of the host that even de’comed]




Trouble shooting:
-----------------
if there is already cert in the ssl foulder -" Remove the old cert form the /etc/puppetlabs/puppet/ssl/certs and the run the pupprt agent -t"














Linux:
----------
id [show user’s group]
sudo –l [list the sudo permissions]
df –h
grep --color=always  <word>
grep --after-context=5 --before-context=10 <word> <file>
shutdown -r now
chmod +x ~/myscript.sh                              
sudo chown <userID> -R <folder>    ## [change the owner of the folder]
sudo chgrp <userID> -R <folder>     ## [change the group of the folder]
sudo chmod -R 0777 <file/folder>        ##  [To Give total permission]

cat mytext.txt > newfile.txt       ## copy the out put of the cat commend to the file
cat mytext.txt >> another-text-file.txt    ## Append/Add text to the file 



rpm -qa | grep <s/w name>	     		##[to find the available software]
sudo mco ping -I <server_name>
sudo su - fdx_3748658						  ## [switch user]
ps –ef | grep 	          				     	##    [running servers]
sudo /etc/init.d/clo ud-elmo stop		     ##	 [stop elmo services]
sudo –u <User> <command> 				##  [use command as the user]

ps –fu cloudsvc
sudo -u cloudsvc /opt/fedex/cloud/pla*/current/bin/status_platform_service








